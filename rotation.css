/* Map rotation visual layer */
.map-container.map-rotated {
  overflow: hidden;
}

.map-container.map-rotated #map {
  transform: rotate(var(--map-rotation-deg, 0deg)) scale(var(--map-rotation-scale, 1));
  transform-origin: 50% 50%;
  transition: transform 200ms ease;
  will-change: transform;
}

/* Rotate button placement */
.rotate-btn {
  position: fixed !important;
  right: 12px;
  top: 160px;
  z-index: 10020; /* 高於其他浮動元素，避免被覆蓋 */
  pointer-events: auto;
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  min-width: 44px;
  min-height: 44px;
}

/* Ensure map uses dynamic viewport height when rotated/fullscreen */
.map-container,
.map-container.fullscreen {
  height: 100dvh;
  height: 100svh;
}

.map-container.fullscreen #map {
  height: 100dvh;
  height: 100svh;
}